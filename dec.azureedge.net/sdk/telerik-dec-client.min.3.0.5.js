var sfDataIntell=sfDataIntell||{};sfDataIntell.constants={sdkVersion:"js-3.1.10",cookieName:"sf-data-intell-subject",docsCookieName:"sf-ins-lst-doc-trckd",endpoints:{apiServer:"https://api.insight.sitefinity.com"},headers:{authorization:"Authorization",datacenterkey:"x-dataintelligence-datacenterkey",subject:"x-dataintelligence-subject",ids:"x-dataintelligence-ids",datasource:"x-dataintelligence-datasource",contacts:"x-dataintelligence-contacts",sdkVersion:"x-dataintelligence-sdk-version"},crossDomainTrackingMessages:{getClientGroup:"getClientGroup",setClientTestGroup:"setClientTestGroup",getClientJourney:"getClientJourney",setClientJourney:"setClientJourney",hubReady:"hubReady"}};var sfDataIntell=sfDataIntell||{};sfDataIntell.utils={DOM_CONTENT_LOADED_EVENT_NAME:"DOMContentLoaded",visitPredicate:"Visit",getEndpointUrl:function(a,b,c){return a+"/collect/v2/data-centers/"+b+"/datasources/"+c+"/interactions"},getSentencesRequestOptions:function(a,b,c){1==b.length&&(b=b[0]);var d=sfDataIntell.utils.getEndpointUrl(a.apiServerUrl,a.apiKey,a.source);return sfDataIntell.utils.getRequestOptions(b,"POST",d,c)},getRequestOptions:function(a,b,c,d){var e={method:b,url:c,contentType:"application/json",headers:d||{},data:a};return e.headers[sfDataIntell.constants.headers.sdkVersion]=sfDataIntell.constants.sdkVersion,e},translateOldToNewFormat:function(a){var b={};if(a instanceof Array)for(i=0;i<a.length;i++){var c=a[i];c.K&&c.V&&(b[c.K]=c.V)}else b=a;return b},addReferrer:function(a){window&&window.decMetadata&&window.decMetadata.contentMetadata&&(window.decMetadata.contentMetadata.PageId&&(a.PageId=window.decMetadata.contentMetadata.PageId),window.decMetadata.contentMetadata.Language&&(a.Language=window.decMetadata.contentMetadata.Language),window.decMetadata.contentMetadata.SiteName&&(a.SiteName=window.decMetadata.contentMetadata.SiteName),window.decMetadata.contentMetadata.Id&&(a.ReferrerId=window.decMetadata.contentMetadata.Id),window.decMetadata.contentMetadata.ContentType&&(a.ReferrerType=window.decMetadata.contentMetadata.ContentType),window.decMetadata.contentMetadata.SFDataProviderName&&(a.ReferrerProvider=window.decMetadata.contentMetadata.SFDataProviderName))},isValidUrl:function(a){if(window.document.documentMode){var b=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}(\.[a-z]{2,4})?\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/i,c=new RegExp(b);return a.match(c)}var d=["http:","https:"];try{var e=new URL(a);return d.indexOf(e.protocol)>-1}catch(f){return!1}},getUrlOrigin:function(a){if(!this.isValidUrl(a))return null;if(window.document.documentMode){var b=a.indexOf(":"),c=a.indexOf("/",++b+2);return-1===c?a:a.substring(0,c)}try{return new URL(a).origin}catch(d){return null}},isDocumentParsingReady:function(){return"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState}};var sfDataIntell=sfDataIntell||{};!function(a){a.Client=function(b){var c=this;if(b=b||{},!b.apiKey)throw new Error('You must provide the "apiKey" for the Data Center.');if(!b.source)throw new Error('You must provide the "source" name for the data center in which data will be reported.');var d=b.enableTracking;null!==b.enableTracking&&void 0!==b.enableTracking||(console.warn('The "enableTracking" option is set to True by default. To disable tracking, change the value to False.'),d=!0),this.apiKey=b.apiKey,this.source=b.source,this.authToken=b.authToken,this.enableTracking=d,this.apiServerUrl=b.apiServerUrl||sfDataIntell.constants.endpoints.apiServer,this.pageInfoProvider=b.pageInfoProvider||new a.PageInfoProvider,this.cookieMaxAgeInDays=b.maxAgeForTrackingCookieInDays||365,this.cookieSlidingExpiration=b.slidingExpirationForTrackingCookie||!1,this.isLocalStorageSupported=this.isLocalStorageSupported();var e=this.readCookie(),f=a.DecRequesterFactory.getRequester(d);this.decRequester=f;var g=!1;if(e&&this.cookieSlidingExpiration&&this.setCookie(e,this.cookieMaxAgeInDays,b.trackingCookieDomain),null!==e&&""!==e||!0!==d||(e=this.generateSubjectKey(),this.setCookie(e,this.cookieMaxAgeInDays,b.trackingCookieDomain),g=!0),this.sentenceClient=new a.SentenceClient(this.apiKey,e,this.isLocalStorageSupported),!1===d&&(this.sentenceClient.writeSentence=function(){}),b.trackBrowserInformation&&g){var h={UserAgent:navigator.userAgent,"Browser language":navigator.language};this.sentenceClient.writeSentence({subjectMetadata:h})}"boolean"==typeof b.autoTracking?this.autoTracking=b.autoTracking:this.autoTracking=!0;var i=b.flushInterval||100;this.subjectMetadataClient=new a.SubjectMetadataClient(this.sentenceClient),this.personalizationClient=new a.PersonalizationClient(this.apiServerUrl,e,this.apiKey,this.source,this.authToken,f),this.v2={},this.v2.personalizationClient=new a.PersonalizationClientV2(this.apiServerUrl,e,this.apiKey,this.source,this.authToken,f),this.mappingsClient=new a.MappingsClient({apiServerUrl:this.apiServerUrl,subject:e,apiKey:this.apiKey,datasource:this.source},this.sentenceClient),b.instrument&&(this.instrumenter=new a.HtmlInstrumenter(this.sentenceClient),this.instrumenter.startTracking()),b.trackVideos&&(this.playVideoTracker=new a.PlayVideoTracker(this.sentenceClient),this.playVideoTracker.startTracking()),b.trackYouTubeVideos&&(this.ytVideoTracker=new a.YouTubeVideoTracker(this.sentenceClient),this.ytVideoTracker.startTracking()),b.trackDocuments&&(this.documentsTracker=new a.DocumentsTracker(this.sentenceClient,b.docsHrefTestExpressions),this.documentsTracker.startTracking()),b.trackPageVisits&&(this.pageVisitsTracker=new a.PageVisitsTracker(this.sentenceClient,{predicate:b.trackPageVisits.predicate,obj:b.trackPageVisits.obj,objMetadata:b.trackPageVisits.objMetadata},this.pageInfoProvider,this.apiKey),this.pageVisitsTracker.startTracking()),!0===d&&this.autoTracking&&setInterval(function(){c.flushData(c)},i)},a.Client.prototype={generateSubjectKey:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},setCookie:function(b,c,d){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3);var f="expires="+e.toGMTString(),g=a.constants.cookieName+"="+b+";path=/; "+f;d&&(g+=";domain="+d),g+=";SameSite=Lax",document.cookie=g},deleteCookie:function(b){var c=new Date;c.setTime(c.getTime()-9e3);var d="; expires="+c.toGMTString(),e="";b&&(e="; domain="+b),document.cookie=a.constants.cookieName+"="+d+"; path=/"+e},readCookie:function(){for(var b=a.constants.cookieName+"=",c=window.document.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},flushData:function(a,b,c){var d;b||(b=function(){}),c||(c=function(){}),a.isLocalStorageSupported?localStorage[a.apiKey]?(d=JSON.parse(localStorage[a.apiKey]),a.flushSentences(a,d,b,c),localStorage[a.apiKey]=""):b():window.tempStorage[a.apiKey]?(d=JSON.parse(window.tempStorage[a.apiKey]),a.flushSentences(a,d,b,c),window.tempStorage[a.apiKey]=""):b()},flushSentences:function(a,b,c,d){var e=sfDataIntell.utils.getSentencesRequestOptions(a,b);this.decRequester.ajaxCall(e,c,d)},isLocalStorageSupported:function(){var a="test";try{return localStorage.setItem(a,"1"),localStorage.removeItem(a),!0}catch(b){return window.tempStorage={},!1}}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.RecommenderPilotClient=function(a,b){if(!a)throw new Error("You must provide core client instance when initializing the recommender client.");this.coreClient=a;var c=a.apiServerUrl;if("/"!==c.charAt(c.length-1)&&(c+="/"),this.apiServerUrl=c,this.enableTracking=a.enableTracking,this.apiKey=a.apiKey,this.dataSource=a.source,this.subjectKey=a.readCookie(),this.requester=a.decRequester,this.journeyKey="InsightRecommenderPilotJourney_"+a.apiKey,this.testGroupKey="InsightRecommenderPilotTestGroup_"+a.apiKey,b&&(this.testMode=b.testMode,b.crossDomainTracking)){if(this.crossDomainTrackingEnabled=b.crossDomainTracking.enabled,this.crossDomainTrackingHubInstrumentationUrl=b.crossDomainTracking.hubInstrumentationUrl,!sfDataIntell.utils.isValidUrl(this.crossDomainTrackingHubInstrumentationUrl))throw new Error("You must provide a valid URL value for 'hubInstrumentationUrl'.");this.crossDomainTrackingHubDomain=sfDataIntell.utils.getUrlOrigin(this.crossDomainTrackingHubInstrumentationUrl)}},a.RecommenderPilotClient.prototype={run:function(a){var b=this;if(!1!==this.enableTracking){if(!(a&&!isNaN(a)||Array.isArray(a)))throw new Error("You must provide a single integer or array of conversion identifier(s) when running the recommender.");var c=Array.isArray(a)?new Array(a):[a],d=function(){b.collectJourney(),b.isClientTargeted(c,function(a){!0===a&&b.getClientTestGroup(function(a){0!==a&&b.getRecommendation(function(c){c&&(a||(a=Math.floor(2*Math.random()),b.setClientTestGroup(a),b.coreClient.sentenceClient.writeSentence({objectMetadata:{RP_IsInTestGroup:1===a}})),1===a&&(b.recommendation=c,window.RecommenderPilotWidget.showRecommendation(c.Title,c.Url)))})})})};this.crossDomainTrackingEnabled?this.initializeCrossDomainCommunication(d):d()}},trackRecommendationShown:function(){this.sendRecommendationInteraction("View recommendation")},trackRecommendationClicked:function(a){this.sendRecommendationInteraction("Follow recommendation"),this.coreClient.flushData(this.coreClient,a,a)},sendRecommendationInteraction:function(a){if(this.recommendation){var b;window.decMetadata&&window.decMetadata.contentMetadata&&(b=window.decMetadata.contentMetadata.Id);var c={objectMetadata:{RP_ActionType:a,RP_CurrentContentUrl:window.location.href,RP_CurrentContentId:b,RP_RecommendationContentId:this.recommendation.ContentId,RP_RecommendationUrl:this.recommendation.Url}};this.coreClient.sentenceClient.writeSentence(c)}},isClientTargeted:function(a,b){var c={};c[sfDataIntell.constants.headers.datasource]=this.dataSource,c[sfDataIntell.constants.headers.subject]=this.subjectKey,c[sfDataIntell.constants.headers.ids]=a.join(","),c[sfDataIntell.constants.headers.authorization]="appauth "+this.apiKey,c[sfDataIntell.constants.headers.datacenterkey]=this.apiKey;var d=this.apiServerUrl+"analytics/v1/conversions/isin",e=sfDataIntell.utils.getRequestOptions(null,"GET",d,c);this.requester.ajaxCall(e,function(a){if(!a||!Array.isArray(a))return b(!1);for(var c=!1,d=!1,e=0;e<a.length;e++){var f=a[e];c=c||f.InSegment,d=d||f.Converted}return b(!d&&c)},function(){return b(!1)})},collectJourney:function(){if(window.decMetadata&&window.decMetadata.contentMetadata){var a=window.decMetadata.contentMetadata,b={ContentId:a.Id,ContentType:a.ContentType,Provider:a.SFDataProviderName,Language:a.Language,Timestamp:new Date};this.setClientJourney(b)}},initializeCrossDomainCommunication:function(a){var b="insight-x-domain-hub",c=document.createElement("iframe");c.src=this.crossDomainTrackingHubInstrumentationUrl,c.setAttribute("id",b),"function"==typeof document.hasStorageAccess?c.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"):c.setAttribute("hidden","hidden");var d=this;this.registerHubMessageHandler(sfDataIntell.constants.crossDomainTrackingMessages.hubReady,function(){return d.hubFrameContentWindow=document.getElementById(b).contentWindow,a()});var e=document.querySelector("body");e.insertBefore(c,e.firstChild)},regEventListener:function(a,b){window.addEventListener?window.addEventListener(a,b):window.attachEvent&&window.attachEvent(a,b)},delEventListener:function(a,b){window.removeEventListener?window.removeEventListener(a,b):window.detachEvent&&window.detachEvent(a,b)},sendMessageToHub:function(a){this.crossDomainTrackingEnabled&&this.hubFrameContentWindow&&(a.apiKey||(a.apiKey=this.apiKey),this.hubFrameContentWindow.postMessage(a,this.crossDomainTrackingHubDomain))},getFromHub:function(a,b){this.registerHubMessageHandler(a,b),this.sendMessageToHub({action:a})},registerHubMessageHandler:function(a,b){var c=this,d=function(e){if(e.origin===c.crossDomainTrackingHubDomain&&e.data&&e.data.action===a)return c.delEventListener("message",d),b(e.data.value)};this.regEventListener("message",d)},getClientTestGroup:function(a){if(!this.crossDomainTrackingEnabled)return a(this.readLocalStorage(this.testGroupKey));this.getFromHub(sfDataIntell.constants.crossDomainTrackingMessages.getClientGroup,a)},setClientTestGroup:function(a){this.crossDomainTrackingEnabled?this.sendMessageToHub({action:sfDataIntell.constants.crossDomainTrackingMessages.setClientTestGroup,value:a}):this.writeInLocalStorage(this.testGroupKey,a)},getClientJourney:function(a){if(!this.crossDomainTrackingEnabled){return a(this.readLocalStorage(this.journeyKey)||[])}this.getFromHub(sfDataIntell.constants.crossDomainTrackingMessages.getClientJourney,a)},setClientJourney:function(a){if(this.crossDomainTrackingEnabled)this.sendMessageToHub({action:sfDataIntell.constants.crossDomainTrackingMessages.setClientJourney,value:a});else{var b=this;this.getClientJourney(function(c){c.push(a),c.length>100&&c.shift(),b.writeInLocalStorage(b.journeyKey,c)})}},readLocalStorage:function(a){var b=localStorage[a];return b&&(b=JSON.parse(b)),b},writeInLocalStorage:function(a,b){localStorage[a]=JSON.stringify(b)},getRecommendation:function(a){var b=this;this.getClientJourney(function(c){if(!c||!Array.isArray(c))return a(null);if(c.length<2)return a(null);var d=b.apiServerUrl+"preview/content-recommender/"+b.apiKey+"/predict",e={Journey:c.sort(function(a,b){return a.Timestamp-b.Timestamp})};b.testMode&&(e.TestMode=!0);var f=sfDataIntell.utils.getRequestOptions(e,"POST",d);b.requester.ajaxCall(f,function(b){return a(b?b.Recommendation:null)},function(){return a(null)})})}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.RecommenderPilotHub=function(a){if(!a||!Array.isArray(a))throw new Error("You must provide valid array of allowed origins (domains) as an argument, e.g. ['https://mydomain.com']");if(1===a.length&&"*"===a[0])this.wildcardAllowed=!0,console.warn("It is not recommended to use a wildcard for specifying target origin since it can cause security issues. More information: https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage#security_concerns");else{for(var b,c=0;c<a.length;c++){var d=a[c];if(!sfDataIntell.utils.isValidUrl(d)){b="Invalid origin URL provided in array at index "+c+": "+d;break}}if(b)throw new Error(b)}this.allowedOrigins=a,this.constants=sfDataIntell.constants.crossDomainTrackingMessages},a.RecommenderPilotHub.prototype={run:function(){var a=this,b=function(b){if((a.wildcardAllowed||-1!==a.allowedOrigins.indexOf(b.origin))&&b.data){var c="InsightRecommenderPilotTestGroup_"+b.data.apiKey,d="InsightRecommenderPilotJourney_"+b.data.apiKey;switch(b.data.action){case a.constants.getClientGroup:var e=a.readLocalStorage(c);window.parent.postMessage({action:b.data.action,value:e},b.origin);break;case a.constants.setClientTestGroup:a.writeInLocalStorage(c,b.data.value);break;case a.constants.getClientJourney:window.parent.postMessage({action:b.data.action,value:a.readLocalStorage(d)||[]},b.origin);break;case a.constants.setClientJourney:var f=a.readLocalStorage(d)||[];f.push(b.data.value),f.length>100&&f.shift(),a.writeInLocalStorage(d,f)}}};window.addEventListener?window.addEventListener("message",b):window.attachEvent&&window.attachEvent("message",b),window.parent.postMessage({action:a.constants.hubReady},"*")},readLocalStorage:function(a){var b=localStorage[a];return b&&(b=JSON.parse(b)),b},writeInLocalStorage:function(a,b){localStorage[a]=JSON.stringify(b)}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){"use strict";var b={getRequester:function(b){return b?new a.DecRequester:new a.DecRequesterMock}};a.DecRequesterFactory=b}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){"use strict";a.DecRequester=function(){};var b=function(a,b){for(var d in b)a.setRequestHeader(d,c(b[d]))},c=function(a){return a.replace(/[\r\n]+/gm,"")},d=function(a,b,c){if(c)if(b.contentType&&a.response&&"application/json"===b.contentType)try{var d=JSON.parse(a.response);c(d)}catch(e){c(a.response)}else c(a.response)};a.DecRequester.prototype={ajaxCall:function(a,c,e){if(!a)throw new Error("options is required.");if(!a.method)throw new Error("options.method is required.");if(!a.url)throw new Error("options.url is required.");var f=a.method,g=a.url,h=a.data?JSON.stringify(a.data):null,i=new XMLHttpRequest;i.open(f,g,!0),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(i.status>=200&&i.status<300||304===i.status?d(i,a,c):d(i,a,e))};var j=a.headers||{};a.contentType&&(j["Content-Type"]=a.contentType),b(i,j),i.send(h)}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){"use strict";a.DecRequesterMock=function(){},a.DecRequesterMock.prototype={ajaxCall:function(a,b,c){b&&b({})}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.HtmlInstrumenter=function(a){this.sentenceClient=a},a.HtmlInstrumenter.prototype={startTracking:function(){function a(){for(var a=window.document.querySelectorAll("[sfdi-trigger]"),c=0;c<a.length;c++){var d=a[c],e=d.getAttribute("sfdi-trigger");d.addEventListener(e,function(a){var c=a.currentTarget,d=c.getAttribute("sfdi-predicate"),e=c.getAttribute("sfdi-object"),f=c.getAttribute("sfdi-obj-metadata"),g=c.getAttribute("sfdi-sub-metadata");f=b.buildMetadataArray(f),g=b.buildMetadataArray(g),null==d&&(d=void 0),null==e&&(e=void 0);var h={predicate:d,object:e};f?(h.objectMetadata=sfDataIntell.utils.translateOldToNewFormat(f),h.objectMetadata.ReferrerUrl=location.href):h.objectMetadata={ReferrerUrl:location.href},sfDataIntell.utils.addReferrer(h.objectMetadata),g&&(h.subjectMetadata=sfDataIntell.utils.translateOldToNewFormat(g)),b.sentenceClient.writeSentence(h)})}}var b=this;sfDataIntell.utils.isDocumentParsingReady()?a():document.addEventListener(sfDataIntell.utils.DOM_CONTENT_LOADED_EVENT_NAME,a)},buildMetadataArray:function(a){return a?a=JSON.parse(a.replace(new RegExp("\\\\","gm"),"").replace(new RegExp("'","gm"),'"')):null}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.PlayVideoTracker=function(a){this.sentenceClient=a,this.predicate="Play video"},a.PlayVideoTracker.prototype={startTracking:function(){function a(){for(var a=document.querySelectorAll("video"),c=0;c<a.length;c++)a[c].addEventListener("play",function(a){var c=a.currentTarget,d=c.getAttribute("src"),e=[];if(window.decMetadata&&window.decMetadata.videosMetadata){var f=window.decMetadata.videosMetadata.filter(function(a){return a.CanonicalUrl===d});if(f.length>0){e=f[0];var g={predicate:b.predicate,object:d,objectMetadata:e};b.sentenceClient.writeSentence(g)}}},{once:!0})}var b=this;sfDataIntell.utils.isDocumentParsingReady()?a():document.addEventListener(sfDataIntell.utils.DOM_CONTENT_LOADED_EVENT_NAME,a)}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){function b(a){for(var b=[],c=document.getElementsByTagName("iframe"),d=0;d<c.length;d++){var e=c[d];if(!1!==/youtube(\-nocookie)?.com\/embed(?!\/videoseries\?list)/.test(e.src)){if(!0!==(-1!==e.src.indexOf("autoplay=1"))){if(!1===e.src.indexOf("enablejsapi=")>-1&&(e.src+=(-1===e.src.indexOf("?")?"?":"&")+"enablejsapi=1"),a&&-1===e.src.indexOf("version=")&&(e.src+="&version=3"),-1===e.src.indexOf("https://www.youtube")){var f="/embed/",g=e.src.indexOf(f)+f.length;e.src="https://www.youtube.com/embed/"+e.src.substr(g)}b.push(e)}}}return b}function c(){var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api",a.setAttribute("async","");var b=document.getElementsByTagName("script");if(b.length>0){var c=b[0];c.parentNode.insertBefore(a,c)}else document.head.appendChild(a)}var d=[],e=[],f=[],g=[25,50,75],h={},i={},j={},k={},l={},m={};a.YouTubeVideoTracker=function(a){this.sentenceClient=a},a.YouTubeVideoTracker.prototype={startTracking:function(){function a(){function a(){for(var a=0;a<d.length;a++){var b=d[a],c=new YT.Player(b,{events:{onStateChange:o}});m[c.id]=c,h[c.id]=[],j[c.id]=g[0]}}function o(a){if(a.data!==YT.PlayerState.UNSTARTED&&a.data!==YT.PlayerState.BUFFERING){var b=q(a.target),c=a.target.id;if(-1===f.indexOf(b.video_id)){if(a.data===YT.PlayerState.PLAYING){-1===e.indexOf(b.video_id)&&(l[b.video_id]=b.video_id+"_"+(new Date).getTime(),u("Start YouTube video",b),e.push(b.video_id));var d=m[c];i[c]||(i[c]=new Array(parseInt(s(d)))),k[c]||(k[c]=setInterval(function(){p(c,b)},500))}a.data===YT.PlayerState.ENDED&&(f.push(b.video_id),u("Finish YouTube video",b),clearInterval(k[c])),setTimeout(function(){r(a.target)===YT.PlayerState.PAUSED&&(clearInterval(k[c]),k[c]=null)},1e3)}}}function p(a,b){var c=m[a],d=i[a],e=t(c);d[parseInt(e)]=!0;var f=d.filter(function(a){return!0===a}).length,k=Math.round(f/d.length*100),l=j[a];if(k>=l&&-1===h[a].indexOf(l)){u("Watch {percent}% of YouTube video".replace("{percent}",l.toString()),b),h[a].push(l);var n=g.findIndex(function(a){return a===l})+1;n<g.length&&(j[a]=g[n])}}function q(a){var b={};return b=a.getVideoData?a.getVideoData():a.playerInfo.videoData,a.getVideoUrl?b.url=a.getVideoUrl():b.url=a.playerInfo.videoUrl,b}function r(a){return a.getPlayerState?a.getPlayerState():a.playerInfo.playerState}function s(a){return a.getDuration?a.getDuration():a.playerInfo.duration}function t(a){return a.getCurrentTime?a.getCurrentTime():a.playerInfo.currentTime}function u(a,b){var c=l[b.video_id],d=b.url;-1!==d.indexOf("t=")&&(d=d.substring(0,d.indexOf("?")),d+="?v="+b.video_id),n.sentenceClient.writeSentence({predicate:a,object:d,objectMetadata:{ContentType:"YouTubeVideo",Id:b.video_id,CanonicalTitle:b.title,TrackingSessionId:c}})}if(window.YT&&window.YT.loaded||window.onYouTubeIframeAPIReady){if(d=b(),0===d.length)return;a()}else{if(d=b(!0),0===d.length)return;window.onYouTubeIframeAPIReady=a,c()}}var n=this;sfDataIntell.utils.isDocumentParsingReady()?a():document.addEventListener(sfDataIntell.utils.DOM_CONTENT_LOADED_EVENT_NAME,a)}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){function b(b){var c=new Date;c.setTime(c.getTime()+12e3);var d="expires="+c.toGMTString(),e=a.constants.docsCookieName+"="+b+";path=/; "+d;e+=";SameSite=Strict",document.cookie=e}a.DocumentsTracker=function(a,b){if(this.sentenceClient=a,this.predicate="Download file",!b||!Array.isArray(b))return void console.error('You must provide "docsHrefTestExpressions" as array with regular expressions for documents tracking to work correctly.');if(0===b.length||b.length>3)return void console.error('Number of expressions provided in "docsHrefTestExpressions" needs to be in the range [1, 3].');try{this.docsHrefTestExpressions=b.map(function(a){return new RegExp(a)}),this.canTrack=!0}catch(c){console.error(c)}},a.DocumentsTracker.prototype={startTracking:function(){function a(){[].slice.call(document.querySelectorAll("a")).filter(function(a){for(var c=!1,d=0;d<b.docsHrefTestExpressions.length;d++)if(b.docsHrefTestExpressions[d].test(a.href)){c=!0;break}return c}).forEach(function(a){a.addEventListener("click",function(a){if(a.currentTarget)if(Boolean(a.currentTarget.target)&&"_blank"===a.currentTarget.target)b.reportFileDownload(a.currentTarget);else{a.preventDefault(),b.reportFileDownload(a.currentTarget);var c=a.currentTarget.href;setTimeout(function(){c&&window.location.href!==c&&(window.location=c)},250)}}),a.addEventListener("mouseup",function(a){a.currentTarget&&a.button&&1===a.button&&b.reportFileDownload(a.currentTarget)})})}var b=this;if(this.canTrack){sfDataIntell.utils.isDocumentParsingReady()?a():document.addEventListener(sfDataIntell.utils.DOM_CONTENT_LOADED_EVENT_NAME,a)}},reportFileDownload:function(a){var c={predicate:this.predicate,object:a.href,objectMetadata:{ReferrerUrl:location.href}};this.sentenceClient.writeSentence(c),b(btoa(a.href))}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.SentenceClient=function(a,b,c){this.apiKey=a,this.subjectKey=b,this.isLocalStorageSupported=c},a.SentenceClient.prototype={writeSentence:function(a){if(!a)throw new Error('You must provide "sentence" argument when writing a sentence.');var b;b=this.isLocalStorageSupported?localStorage[this.apiKey]?JSON.parse(localStorage[this.apiKey]):[]:window.tempStorage[this.apiKey]?JSON.parse(window.tempStorage[this.apiKey]):[],a.subjectMetadata&&(a.subjectMetadata=sfDataIntell.utils.translateOldToNewFormat(a.subjectMetadata)),a.objectMetadata&&(a.objectMetadata=sfDataIntell.utils.translateOldToNewFormat(a.objectMetadata)),a.predicate&&a.object&&a.predicate!==sfDataIntell.utils.visitPredicate&&(a.objectMetadata=a.objectMetadata||{},sfDataIntell.utils.addReferrer(a.objectMetadata)),b.push({S:this.subjectKey,P:a.predicate,O:a.object,SM:a.subjectMetadata,OM:a.objectMetadata,MappedTo:a.mappedTo}),this.isLocalStorageSupported?localStorage[this.apiKey]=JSON.stringify(b):window.tempStorage[this.apiKey]=JSON.stringify(b)}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.SubjectMetadataClient=function(a){this.sentenceClient=a},a.SubjectMetadataClient.prototype={writeSubjectMetadata:function(a){if(!a)throw new Error('You must provide "metadata" argument when writing subject metadata.');var b=sfDataIntell.utils.translateOldToNewFormat(a);this.sentenceClient.writeSentence({subjectMetadata:b})}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.PageVisitsTracker=function(b,c,d,e){this.pageInfoProvider=d,this.pageMetadataStorage=new a.PageMetadataStore(e),this.sentenceClient=b,this.predicate=c.predicate||sfDataIntell.utils.visitPredicate,this.obj=c.obj||this.pageInfoProvider.getCurrentPageUrl(),this.objMetadata=c.objMetadata||{};var f=this.pageInfoProvider.getDocumentTitle();this.objMetadata.DocumentTitle=f,window.decMetadata&&window.decMetadata.contentMetadata&&(this.objMetadata=window.decMetadata.contentMetadata,this.objMetadata.Title&&this.objMetadata.Title!==f&&(this.objMetadata.DocumentTitle=f))},a.PageVisitsTracker.prototype={startTracking:function(){this.storeMetadataForCurrentPage(this.obj,this.objMetadata);var a=this.pageInfoProvider.getCurrentPageReferrer();this.attachPreviousPageMetadata(this.objMetadata,a),this.attachReferrerMetadata(this.objMetadata,a),this.saveFallbackPageMetadata(this.obj,this.objMetadata),this.sentenceClient.writeSentence({predicate:this.predicate,object:this.obj,objectMetadata:this.objMetadata})},storeMetadataForCurrentPage:function(a,b){var c=this.getPageMetadataObject(b),d=a;a.indexOf("#")>-1&&(d=a.substring(0,a.indexOf("#"))),this.pageMetadataStorage.addMetadata(d,c)},attachPreviousPageMetadata:function(a,b){var c;(c=b?this.pageMetadataStorage.getMetadata(b):this.pageMetadataStorage.getLastMetadata())&&Object.keys(c).length>0&&(a.PreviousPageId=c.PageId,a.PreviousPageLanguage=c.Language,a.PreviousPageABTestId=c.ABTestId||c.PreviousPageABTestId)},attachReferrerMetadata:function(a,b){if(b||(b=this.pageMetadataStorage.getLastReferrerUrl()),b){a.PreviousPageUrl=b;var c=this.getHostName(b);c&&c!==location.hostname&&(a.ReferrerUrl=c)}},getPageMetadataObject:function(a){var b={PageId:a.PageId,Language:a.Language};return a.ABTest&&a.ABTest.Id&&a.ABTest.VariantId&&(b.ABTestId=a.ABTest.Id),b},saveFallbackPageMetadata:function(a,b){var c=a;a.indexOf("#")>-1&&(c=a.substring(0,a.indexOf("#")));var d=this.getPageMetadataObject(b);this.pageMetadataStorage.setLastReferrerAndMetadata(c,d)},getHostName:function(a){if(a){var b=document.createElement("a");return b.href=a,b.hostname}}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.PersonalizationClient=function(a,b,c,d,e,f){this.apiServerUrl=a,this.subjectKey=b,this.apiKey=c,this.datasource=d,this.authToken=e,this.requester=f},a.PersonalizationClient.prototype={call:function(a,b,c,d){if(!this.authToken)throw new Error('You must provide "authToken" when using the Personalization Client.');if(!this.requester)throw new Error("decRequester was not initialized.");var e=this.apiServerUrl+a,f=sfDataIntell.utils.getRequestOptions(null,"GET",e,b);f.headers[sfDataIntell.constants.headers.authorization]=this.authToken,f.headers[sfDataIntell.constants.headers.datacenterkey]=this.apiKey,this.requester.ajaxCall(f,c,d)},isInCampaigns:function(a,b,c){if(!a)throw new Error('You must provide "campaignIds" argument when using the "isInCampaigns" method.');var d={};d[sfDataIntell.constants.headers.subject]=this.subjectKey,d[sfDataIntell.constants.headers.ids]=a,d[sfDataIntell.constants.headers.datasource]=this.datasource,this.call("/analytics/v1/campaigns/isin",d,b,c)},isInLeads:function(a,b,c,d){if(!a)throw new Error('You must provide "scoringIds" argument when using the "isInLeads" method.');if(!b)throw new Error('You must provide "contactsDetails" argument when using the "isInLeads" method.');var e={};e[sfDataIntell.constants.headers.contacts]=b,e[sfDataIntell.constants.headers.ids]=a,this.call("/analytics/v1/scorings/leads/in",e,c,d)},isInPersonas:function(a,b,c,d){d=d||this.subjectKey;var e={};e[sfDataIntell.constants.headers.datasource]=this.datasource,e[sfDataIntell.constants.headers.subject]=d,e[sfDataIntell.constants.headers.ids]=a,this.call("/analytics/v1/scorings/personas/in",e,b,c)}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.PersonalizationClientV2=function(a,b,c,d,e,f){this.apiServerUrl=a,this.subjectKey=b,this.apiKey=c,this.datasource=d,this.authToken=e,this.requester=f},a.PersonalizationClientV2.prototype={call:function(a,b,c,d){if(!this.authToken)throw new Error('You must provide "authToken" when using the Personalization Client.');if(!this.requester)throw new Error("decRequester was not initialized.");var e=this.apiServerUrl+a,f=sfDataIntell.utils.getRequestOptions(null,"GET",e,b);f.headers[sfDataIntell.constants.headers.authorization]=this.authToken,f.headers[sfDataIntell.constants.headers.datacenterkey]=this.apiKey,this.requester.ajaxCall(f,c,d)},isInLeads:function(a,b,c,d){d=d||this.subjectKey;var e={};e[sfDataIntell.constants.headers.datasource]=this.datasource,e[sfDataIntell.constants.headers.subject]=d,e[sfDataIntell.constants.headers.ids]=a,this.call("/analytics/v2/scorings/leads/in",e,b,c)}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.MappingsClient=function(a,b){this.apiServerUrl=a.apiServerUrl,this.subject=a.subject,this.apiKey=a.apiKey,this.datasource=a.datasource,this.sentenceClient=b},a.MappingsClient.prototype={addMapping:function(a,b){this.sentenceClient.writeSentence({mappedTo:[{S:a,DS:b}]})}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.PageMetadataStore=function(a){this.sizeLimiter=1e3,this.localStorageKey="DecPageMetadata_"+a,this.indexer=[],this.valueContainer=[],this.sessionStorageKey="LastPageUrl"},a.PageMetadataStore.prototype={addMetadata:function(a,b){this.loadFromLocalStorage(),this.indexer.length>=this.sizeLimiter&&(this.indexer.shift(),this.valueContainer.shift(),this.saveToLocalStorage()),this.metadataForPageExists(a)&&this.removeMetadata(a),this.indexer.push(a),this.valueContainer.push(b),this.saveToLocalStorage()},getMetadata:function(a){this.loadFromLocalStorage();var b=this.indexer.indexOf(a);return this.valueContainer[b]},setLastReferrerAndMetadata:function(a,b){this.saveToSessionStorage(a,b)},getLastMetadata:function(){var a,b=this.loadFromSessionStorage();return b&&(a=b.lastObjectMetadata),a},getLastReferrerUrl:function(){var a,b=this.loadFromSessionStorage();return b&&(a=b.lastPageUrl),a},removeMetadata:function(a){this.loadFromLocalStorage();var b=this.indexer.indexOf(a);this.indexer.splice(b,1),this.valueContainer.splice(b,1),this.saveToLocalStorage()},metadataForPageExists:function(a){return this.loadFromLocalStorage(),this.indexer.indexOf(a)>=0},loadFromLocalStorage:function(){if("undefined"!=typeof Storage){var a=localStorage.getItem(this.localStorageKey),b=JSON.parse(a);b?(this.indexer=b.indexer||[],this.valueContainer=b.valueContainer||[]):(this.indexer=[],this.valueContainer=[])}},saveToLocalStorage:function(){if("undefined"!=typeof Storage){var a={};a.indexer=this.indexer,a.valueContainer=this.valueContainer,localStorage.setItem(this.localStorageKey,JSON.stringify(a))}},
loadFromSessionStorage:function(){if("undefined"!=typeof Storage){var a=sessionStorage.getItem(this.sessionStorageKey);return JSON.parse(a)}},saveToSessionStorage:function(a,b){if("undefined"!=typeof Storage){var c={lastPageUrl:a,lastObjectMetadata:b};sessionStorage.setItem(this.sessionStorageKey,JSON.stringify(c))}}}}(sfDataIntell);var sfDataIntell=sfDataIntell||{};!function(a){a.PageInfoProvider=function(){},a.PageInfoProvider.prototype={getCurrentPageUrl:function(){return location.href},getCurrentPageReferrer:function(){return document.referrer},getDocumentTitle:function(){return document.title}}}(sfDataIntell);var insightSdkReadyEvent="insight-sdk-ready";if("function"==typeof CustomEvent)document.dispatchEvent(new CustomEvent(insightSdkReadyEvent));else{var CustomEvent=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent;var evt=new CustomEvent(insightSdkReadyEvent,{bubbles:!0,cancelable:!0});document.dispatchEvent(evt)}